<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2016 | realguess</title>
  <meta name="author" content="Chao Huang">
  
  <meta name="description" content="Just a blog about every detail encountered.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="realguess"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="realguess" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45698182-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">realguess</a></h1>
  <h2><a href="/">Don&#39;t afraid to try!</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">2016</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-10-11T12:00:00.000Z"><a href="/2016/10/11/a-cli-method-to-check-ssl-certificate-expiration-date/">Oct 11, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/10/11/a-cli-method-to-check-ssl-certificate-expiration-date/">A CLI Method to Check SSL Certificate Expiration Date</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I know that browser does this automatically, but it might come in handy if you need to check the expiration date of a SSL certificate through CLI. The key is <code>openssl</code>, OpenSSL command line tool.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ echo | openssl s_client -connect example.com:443 2> /dev/null | \</div><div class="line">  openssl x509 -noout -enddate</div><div class="line">notAfter=Nov 28 12:00:00 2018 GMT</div></pre></td></tr></table></figure>

<p>The command is consisted of two parts:</p>
<ul>
<li>Retrieve SSL certificate from the server</li>
<li>Extract the expiration date data</li>
</ul>
<blockquote>
<p>The openssl program is a command line tool for using the various cryptography functions of OpenSSL’s crypto library from the shell. It can be used for[^1]</p>
<ul>
<li>Creation and management of private keys, public keys and parameters</li>
<li>Public key cryptographic operations</li>
<li>Creation of X.509 certificates, CSRs and CRLs</li>
<li>Calculation of Message Digests</li>
<li>Encryption and Decryption with Ciphers</li>
<li>SSL/TLS Client and Server Tests</li>
<li>Handling of S/MIME signed or encrypted mail</li>
<li>Time Stamp requests, generation and verification</li>
</ul>
</blockquote>
<p>What we need here is to perform <em>SSL/TLS Client and Server Tests</em>.</p>
<p><code>s_client</code> is one of the standard commands of <code>openssl</code> command line tool:</p>
<blockquote>
<p>This implements a generic SSL/TLS client which can establish a transparent connection to a remote server speaking SSL/TLS. It’s intended for testing purposes only and provides only rudimentary interface functionality but internally uses mostly all functionality of the OpenSSL ssl library.[^1]</p>
</blockquote>
<p>Dig deeper into <code>s_client</code> command:</p>
<blockquote>
<p>The s_client command implements a generic SSL/TLS client which connects to a remote host using SSL/TLS. It is a very useful diagnostic tool for SSL servers.[^2]</p>
</blockquote>
<p>Option <code>-connect host:port</code>:</p>
<blockquote>
<p>This specifies the host and optional port to connect to. If not specified then an attempt is made to connect to the local host on port 4433.[^2]</p>
</blockquote>
<p>And the format is:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ openssl s_client -connect servername:<span class="number">443</span> &gt; data</div></pre></td></tr></table></figure>

<p>If a connection is established, <code>openssl</code> enters interactive mode:</p>
<blockquote>
<p>If a connection is established with an SSL server then any data received from the server is displayed and any key presses will be sent to the server. When used interactively (which means neither <code>-quiet</code> nor <code>-ign_eof</code> have been given), the session will be renegotiated if the line begins with an R, and if the line begins with a Q or if end of file is reached, the connection will be closed down.[^2]</p>
</blockquote>
<p>To quit, type <code>Q</code> or <code>&lt;ctr&gt;+d</code> (EOF).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ openssl s_client -connect example.com:443 > /tmp/example.com</div><div class="line">depth=1 C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert SHA2 High Assurance</div><div class="line"> Server CA</div><div class="line">verify error:num=20:unable to get local issuer certificate</div><div class="line">verify return:0</div><div class="line">Q</div><div class="line">DONE</div></pre></td></tr></table></figure>

<p>Dump the session data:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">$ cat /tmp/example.com</div><div class="line">CONNECTED(00000003)</div><div class="line">---</div><div class="line">Certificate chain</div><div class="line"> 0 s:/C=US/ST=California/L=Los Angeles/O=Internet Corporation for Assigned Names and Numbers/OU=Technology/CN=www.example.org</div><div class="line">   i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert SHA2 High Assurance Server CA</div><div class="line"> 1 s:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert SHA2 High Assurance Server CA</div><div class="line">   i:/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance EV Root CA</div><div class="line">---</div><div class="line">Server certificate</div><div class="line">-----BEGIN CERTIFICATE-----</div><div class="line">MIIF8jCCBNqgAwIBAgIQDmTF+8I2reFLFyrrQceMsDANBgkqhkiG9w0BAQsFADBw</div><div class="line">MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3</div><div class="line">d3cuZGlnaWNlcnQuY29tMS8wLQYDVQQDEyZEaWdpQ2VydCBTSEEyIEhpZ2ggQXNz</div><div class="line">dXJhbmNlIFNlcnZlciBDQTAeFw0xNTExMDMwMDAwMDBaFw0xODExMjgxMjAwMDBa</div><div class="line">MIGlMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEUMBIGA1UEBxML</div><div class="line">TG9zIEFuZ2VsZXMxPDA6BgNVBAoTM0ludGVybmV0IENvcnBvcmF0aW9uIGZvciBB</div><div class="line">c3NpZ25lZCBOYW1lcyBhbmQgTnVtYmVyczETMBEGA1UECxMKVGVjaG5vbG9neTEY</div><div class="line">MBYGA1UEAxMPd3d3LmV4YW1wbGUub3JnMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A</div><div class="line">MIIBCgKCAQEAs0CWL2FjPiXBl61lRfvvE0KzLJmG9LWAC3bcBjgsH6NiVVo2dt6u</div><div class="line">Xfzi5bTm7F3K7srfUBYkLO78mraM9qizrHoIeyofrV/n+pZZJauQsPjCPxMEJnRo</div><div class="line">D8Z4KpWKX0LyDu1SputoI4nlQ/htEhtiQnuoBfNZxF7WxcxGwEsZuS1KcXIkHl5V</div><div class="line">RJOreKFHTaXcB1qcZ/QRaBIv0yhxvK1yBTwWddT4cli6GfHcCe3xGMaSL328Fgs3</div><div class="line">jYrvG29PueB6VJi/tbbPu6qTfwp/H1brqdjh29U52Bhb0fJkM9DWxCP/Cattcc7a</div><div class="line">z8EXnCO+LK8vkhw/kAiJWPKx4RBvgy73nwIDAQABo4ICUDCCAkwwHwYDVR0jBBgw</div><div class="line">FoAUUWj/kK8CB3U8zNllZGKiErhZcjswHQYDVR0OBBYEFKZPYB4fLdHn8SOgKpUW</div><div class="line">5Oia6m5IMIGBBgNVHREEejB4gg93d3cuZXhhbXBsZS5vcmeCC2V4YW1wbGUuY29t</div><div class="line">ggtleGFtcGxlLmVkdYILZXhhbXBsZS5uZXSCC2V4YW1wbGUub3Jngg93d3cuZXhh</div><div class="line">bXBsZS5jb22CD3d3dy5leGFtcGxlLmVkdYIPd3d3LmV4YW1wbGUubmV0MA4GA1Ud</div><div class="line">DwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwdQYDVR0f</div><div class="line">BG4wbDA0oDKgMIYuaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL3NoYTItaGEtc2Vy</div><div class="line">dmVyLWc0LmNybDA0oDKgMIYuaHR0cDovL2NybDQuZGlnaWNlcnQuY29tL3NoYTIt</div><div class="line">aGEtc2VydmVyLWc0LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG/WwBATAqMCgGCCsG</div><div class="line">AQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BTMAgGBmeBDAECAjCB</div><div class="line">gwYIKwYBBQUHAQEEdzB1MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2Vy</div><div class="line">dC5jb20wTQYIKwYBBQUHMAKGQWh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9E</div><div class="line">aWdpQ2VydFNIQTJIaWdoQXNzdXJhbmNlU2VydmVyQ0EuY3J0MAwGA1UdEwEB/wQC</div><div class="line">MAAwDQYJKoZIhvcNAQELBQADggEBAISomhGn2L0LJn5SJHuyVZ3qMIlRCIdvqe0Q</div><div class="line">6ls+C8ctRwRO3UU3x8q8OH+2ahxlQmpzdC5al4XQzJLiLjiJ2Q1p+hub8MFiMmVP</div><div class="line">PZjb2tZm2ipWVuMRM+zgpRVM6nVJ9F3vFfUSHOb4/JsEIUvPY+d8/Krc+kPQwLvy</div><div class="line">ieqRbcuFjmqfyPmUv1U9QoI4TQikpw7TZU0zYZANP4C/gj4Ry48/znmUaRvy2kvI</div><div class="line">l7gRQ21qJTK5suoiYoYNo3J9T+pXPGU7Lydz/HwW+w0DpArtAaukI8aNX4ohFUKS</div><div class="line">wDSiIIWIWJiJGbEeIO0TIFwEVWTOnbNl/faPXpk5IRXicapqiII=</div><div class="line">-----END CERTIFICATE-----</div><div class="line">subject=/C=US/ST=California/L=Los Angeles/O=Internet Corporation for Assigned Names and Numbers/OU=Technology/CN=www.example.org</div><div class="line">issuer=/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert SHA2 High Assurance Server CA ---</div><div class="line">No client certificate CA names sent</div><div class="line">---</div><div class="line">SSL handshake has read 3393 bytes and written 421 bytes</div><div class="line">---</div><div class="line">New, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES128-GCM-SHA256</div><div class="line">Server public key is 2048 bit</div><div class="line">Secure Renegotiation IS supported</div><div class="line">Compression: NONE</div><div class="line">Expansion: NONE</div><div class="line">SSL-Session:</div><div class="line">    Protocol  : TLSv1.2</div><div class="line">    Cipher    : ECDHE-RSA-AES128-GCM-SHA256</div><div class="line">    Session-ID: C828441A824CE7B0F6A74BBE890AB23727445EAE8521E19F438E679C39E969B1</div><div class="line">    Session-ID-ctx:</div><div class="line">    Master-Key: 38BE4F754FBCB5F41650AD91AA5588ACD88B75D7939487052D9FD2790476E7C6D2512A6451A3FC102958488BF173CB54</div><div class="line">    Key-Arg   : None</div><div class="line">    PSK identity: None</div><div class="line">    PSK identity hint: None</div><div class="line">    SRP username: None</div><div class="line">    TLS session ticket lifetime hint: 300 (seconds)</div><div class="line">    TLS session ticket:</div><div class="line">    0000 - 83 70 c4 28 23 ee 9c 9e-87 1b 96 bf 44 76 ee d3   .p.(#.......Dv..</div><div class="line">    0010 - 45 c9 be ee a5 c5 42 49-c9 08 35 10 ba 79 03 b4   E.....BI..5..y..</div><div class="line">    0020 - 46 99 9a f2 d3 7b b5 f2-ad 9e 10 5c 7a 61 c3 0e   F....{.....\za..</div><div class="line">    0030 - e0 09 aa 7a 5e 2a 2e bb-42 6a 08 18 16 ae 56 66   ...z^*..Bj....Vf</div><div class="line">    0040 - 11 0c 96 1a 4a 20 9f 50-6d f7 e2 53 00 75 6f 07   ....J .Pm..S.uo.</div><div class="line">    0050 - 7f 94 bf 4a 5f e1 f6 3b-d5 b7 6c 11 bc 33 7b 10   ...J_..;..l..3{.</div><div class="line">    0060 - 78 e3 81 a0 0b 83 25 d6-e6 a5 64 90 59 24 a6 e9   x.....%...d.Y$..</div><div class="line">    0070 - 9b b6 4b be 9e 42 1b 03-e0 d7 76 e9 32 87 3e 0d   ..K..B....v.2.>.</div><div class="line">    0080 - 3d 09 09 32 18 fd 04 63-93 fe 33 9f 47 50 d4 c1   =..2...c..3.GP..</div><div class="line">    0090 - e1 a9 21 cc 67 30 ea 03-7f c1 ee 2a 54 02 c8 11   ..!.g0.....*T...</div><div class="line"></div><div class="line">    Start Time: 1475971200</div><div class="line">    Timeout   : 300 (sec)</div><div class="line">    Verify return code: 20 (unable to get local issuer certificate)</div><div class="line">---</div></pre></td></tr></table></figure>

<p>To avoid the interactive mode, we can pipe an empty string into the command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ echo | openssl s_client -connect example.com:443 > /tmp/example.com 2> /dev/null</div></pre></td></tr></table></figure>

<p>Now we have retrieved the SSL certificate from the server. Next, extract the expiration date. This is done by using the standard command <code>x509</code>:</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/10/11/a-cli-method-to-check-ssl-certificate-expiration-date/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-10-09T12:00:00.000Z"><a href="/2016/10/09/renewing-let-s-encrypt-ssl-certificate-with-docker/">Oct 9, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/10/09/renewing-let-s-encrypt-ssl-certificate-with-docker/">Renewing Let&#39;s Encrypt SSL Certificate with Docker</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://letsencrypt.org/" target="_blank" rel="external">Let’s Encrypt CA</a> issues short-lived certificates (90 days). Automated renewal process is preferred, recommended, and encouraged. But in a few situations, automated process is not available, here is how to do it manually when <a href="https://realguess.net/2016/10/09/getting-let-s-encrypt-ssl-certificate-with-docker/" target="_blank" rel="external">SSL certificate was installed with Docker</a>:</p>
<p>First, update the container to the latest version. The latest version can be found from the <a href="https://github.com/certbot/certbot/releases" target="_blank" rel="external">release page</a> in GitHub.</p>
<p>The latest is <code>v0.9.1</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ docker pull quay.io/letsencrypt/letsencrypt:v0.9.1</div></pre></td></tr></table></figure>

<p>Turn off application (if running as a Docker container) to free up the HTTPS port 443:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ docker stop app</div></pre></td></tr></table></figure>

<p>Renew the certificate by issuing <code>renew</code> command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$ docker run -it --rm -p 443:443 --name certbot \</div><div class="line">  -v /etc/letsencrypt:/etc/letsencrypt          \</div><div class="line">  -v /var/log/letsencrypt:/var/log/letsencrypt  \</div><div class="line">  quay.io/letsencrypt/letsencrypt:v0.9.1 renew</div><div class="line">Saving debug log to /var/log/letsencrypt/letsencrypt.log</div><div class="line"></div><div class="line">-------------------------------------------------------------------------------</div><div class="line">Processing /etc/letsencrypt/renewal/example.com.conf</div><div class="line">-------------------------------------------------------------------------------</div><div class="line">Cert is due for renewal, auto-renewing...</div><div class="line">Starting new HTTPS connection (1): acme-v01.api.letsencrypt.org</div><div class="line">Renewing an existing certificate</div><div class="line">Performing the following challenges:</div><div class="line">tls-sni-01 challenge for example.com</div><div class="line">Waiting for verification...</div><div class="line">Cleaning up challenges</div><div class="line">Generating key (2048 bits): /etc/letsencrypt/keys/0001_key-certbot.pem</div><div class="line">Creating CSR: /etc/letsencrypt/csr/0001_csr-certbot.pem</div><div class="line"></div><div class="line">-------------------------------------------------------------------------------</div><div class="line">new certificate deployed without reload, fullchain is</div><div class="line">/etc/letsencrypt/live/example.com/fullchain.pem</div><div class="line">-------------------------------------------------------------------------------</div><div class="line"></div><div class="line">Congratulations, all renewals succeeded. The following certs have been renewed:</div><div class="line">  /etc/letsencrypt/live/example.com/fullchain.pem (success)</div></pre></td></tr></table></figure>

<p>Restart app (it’s <code>start</code> not <code>restart</code>):</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ docker start app</div></pre></td></tr></table></figure>

<p>Check the expiration date:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ echo | openssl s_client -connect example.com:443 2> /dev/null | \</div><div class="line">  openssl x509 -noout -dates</div><div class="line">notBefore=Oct  9 12:00:00 2016 GMT</div><div class="line">notAfter=Jan  7 12:00:00 2017 GMT</div></pre></td></tr></table></figure>

<p>For more information on renewing, see the <a href="https://certbot.eff.org/docs/using.html#renewing-certificates" target="_blank" rel="external">Renewing Certificates</a> section from the Certbot documentation.</p>
<p>Settings:</p>
<ul>
<li>Certbot v0.9.1</li>
<li>Docker v1.12.1</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-10-09T12:00:00.000Z"><a href="/2016/10/09/getting-let-s-encrypt-ssl-certificate-with-docker/">Oct 9, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/10/09/getting-let-s-encrypt-ssl-certificate-with-docker/">Getting Let&#39;s Encrypt SSL Certificate with Docker</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://letsencrypt.org/" target="_blank" rel="external">Let’s Encrypt</a> is a free, open, and automated certificate authority (CA). And its <a href="https://certbot.eff.org/" target="_blank" rel="external">Certbot</a> is a fully-featured, extensible client for Let’s Encrypt CA that can automate the tasks of getting, renewing and even installing SSL certificates.</p>
<p>First, you need to get Certbot. There are a few ways to <a href="https://certbot.eff.org/docs/using.html" target="_blank" rel="external">install Certbot</a>. But with <a href="https://docker.com/" target="_blank" rel="external">Docker</a>, you don’t need to install, you just need to download the <a href="https://quay.io/repository/letsencrypt/letsencrypt" target="_blank" rel="external">Docker image</a> and run the container. However, the caveat is that this method does not <em>install</em> the certificate automatically respecting to your web server. But if you’re like me, running your server in another Docker container, this might be the way to go.</p>
<p>Let’s start.</p>
<p>First, download the image. You can download the <code>latest</code> version (tag):</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ docker pull quay.io/letsencrypt/letsencrypt:latest</div></pre></td></tr></table></figure>

<p>But the latest usually is not a stable release:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ docker run -it --rm quay.io/letsencrypt/letsencrypt:latest --version</div><div class="line">certbot 0.10.0.dev0</div></pre></td></tr></table></figure>

<p>Therefore, it’s better to use a specific release, which can be found in Certbot’s GitHub page: <a href="https://github.com/certbot/certbot/releases" target="_blank" rel="external">https://github.com/certbot/certbot/releases</a>.</p>
<p>The latest one now is <code>v0.9.1</code>. We can pull that from Quay.io:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ docker pull quay.io/letsencrypt/letsencrypt:v0.<span class="number">9.1</span></div></pre></td></tr></table></figure>

<p>Confirm the release version:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ docker run -it --rm quay.io/letsencrypt/letsencrypt:v0.9.1 --version</div><div class="line">certbot 0.9.1</div></pre></td></tr></table></figure>

<p>Let’s take a look at the Docker image:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ docker inspect quay.io/letsencrypt/letsencrypt:v0.<span class="number">9.1</span></div></pre></td></tr></table></figure>

<p>Dropping things don’t care, the output is:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">    {</div><div class="line">        "<span class="attribute">RepoTags</span>": <span class="value">[</span></div><div class="line">            <span class="string">"quay.io/letsencrypt/letsencrypt:v0.9.1"</span></div><div class="line">        ],</div><div class="line">        "<span class="attribute">ContainerConfig</span>": <span class="value">{</span></div><div class="line">            "<span class="attribute">ExposedPorts</span>": <span class="value">{</span></div><div class="line">                "<span class="attribute">443/tcp</span>": <span class="value">{}</span></div><div class="line">            },</div><div class="line">            "<span class="attribute">Cmd</span>": <span class="value">[</span></div><div class="line">                <span class="string">"/bin/sh"</span>,</div><div class="line">                <span class="string">"-c"</span>,</div><div class="line">                <span class="string">"#(nop) ENTRYPOINT \u0026{[\"certbot\"]}"</span></div><div class="line">            ],</div><div class="line">            "<span class="attribute">Volumes</span>": <span class="value">{</span></div><div class="line">                "<span class="attribute">/etc/letsencrypt</span>": <span class="value">{}</span>,</div><div class="line">                "<span class="attribute">/var/lib/letsencrypt</span>": <span class="value">{}</span></div><div class="line">            },</div><div class="line">            "<span class="attribute">Entrypoint</span>": <span class="value">[</span></div><div class="line">                <span class="string">"certbot"</span></div><div class="line">            ]</div><div class="line">        }</div><div class="line">    }</div><div class="line">]</div></pre></td></tr></table></figure>

<p>The <code>ENTRYPOINT</code> is <code>certbot</code> binary:</p>
<blockquote>
<p>An <code>ENTRYPOINT</code> allows you to configure a container that will run as an executable.[^1]</p>
</blockquote>
<p>And the command line arguments to <code>docker run</code> becomes the arguments to <code>certbot</code> command. As we saw earlier to obtain the release version by using <code>--version</code>.</p>
<blockquote>
<p>You can override the <code>ENTRYPOINT</code> instruction using the <code>docker run --entrypoint</code> flag.[^1]</p>
</blockquote>
<p>For example, to override and run the container without executing the <code>certbot</code> command:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ docker run -it --rm --name certbot --entrypoint /bin/bash \</div><div class="line">  quay.io/letsencrypt/letsencrypt:v0.<span class="number">9.1</span></div></pre></td></tr></table></figure>

<p>But we are more concerning about others, such as exposed port and mapped volumes. The exposed port is 443, HTTPS port. The most important volume (directory) is <code>/etc/letsencrypt</code>. All generated keys and issued certificates can be found in there. Directory <code>/var/lib/letsencrypt</code> is the default working directory, some backup stuff are stored. I have yet to find it useful. However, the logs directory <code>/var/log/letsencrypt</code> is not being used. This could be useful if things went haywire.</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/10/09/getting-let-s-encrypt-ssl-certificate-with-docker/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-09-26T12:00:00.000Z"><a href="/2016/09/26/installing-let-s-encrypt-ssl-certificate-on-google-app-engine-using-certbot/">Sep 26, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/09/26/installing-let-s-encrypt-ssl-certificate-on-google-app-engine-using-certbot/">Installing Let&#39;s Encrypt SSL Certificate on Google App Engine Using Certbot</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://letsencrypt.org/" target="_blank" rel="external">Let’s Encrypt</a> is a free, open, and automated certificate authority. And its <a href="https://certbot.eff.org/" target="_blank" rel="external">Certbot</a> is a fully-featured, extensible client for Let’s Encrypt CA that can automate the tasks of getting, renewing and even installing SSL certificates.</p>
<p>Sounds great! However, not yet to be simple and automated, especially working cloud providers such as <a href="https://cloud.google.com/" target="_blank" rel="external">Google Cloud Platform</a> and its <a href="https://appengine.google.com/" target="_blank" rel="external">Google App Engine</a> or GAE.</p>
<p><em>But it’s free. Yes, it’s free. Free software works better. Free certificate authority works better than others.</em></p>
<p>GAE is a managed service. The place to stored SSL certificate is in separate machines (load balancers). The current automated domain validation by Certbot mostly work with a single machine. Therefore, when the machine issues certificate request is not the same machine to be validated, we need find another way, hopefully an automated method to perform domain validation across machines.</p>
<p>Before creating an automated method, let’s see if we can do it manually. Certbot supports a number of different plugins that can be used to obtain and/or install certificates. A plugin is like an extension that supports a particular web server. Let’s see if we can find a plugin that supports GAE.</p>
<p>Here are some supported by Certbot:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$ certbot --help plugins</div><div class="line"></div><div class="line">plugins:</div><div class="line">  Certbot client supports an extensible plugins architecture. See 'certbot</div><div class="line">  plugins' for a list of all installed plugins and their names. You can</div><div class="line">  force a particular plugin by setting options provided below. Running</div><div class="line">  --help <plugin_name> will list flags specific to that plugin.</plugin_name></div><div class="line"></div><div class="line">  --apache              Obtain and install certs using Apache (default: False)</div><div class="line">  --nginx               Obtain and install certs using Nginx (default: False)</div><div class="line">  --standalone          Obtain certs using a "standalone" webserver. (default:</div><div class="line">                        False)</div><div class="line">  --manual              Provide laborious manual instructions for obtaining a</div><div class="line">                        cert (default: False)</div><div class="line">  --webroot             Obtain certs by placing files in a webroot directory.</div><div class="line">                        (default: False)</div></pre></td></tr></table></figure>

<p>And there are also a number of third-party plugins, see the User Guide in <a href="https://certbot.eff.org/docs" target="_blank" rel="external">Certbot Documentation</a>. But there is none for GAE. It looks like there are only three possible options to try: standalone, webroot and manual.</p>
<p>Let’s start with the standalone method, and issue that from the local machine:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo certbot certonly --standalone -d example.com</div></pre></td></tr></table></figure>

<p>If you’re the first time running the command, you will be prompted for email and agreement screens. Both email and agreement can be <em>automated</em> via <code>--email</code> and <code>--agree-tos</code> options. That’s the <em>automated</em> part.</p>
<p>After freeing up the ports 80 and 443, run into some issues:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Failed authorization procedure. example.com (tls-sni-01): urn:acme:error:connection </div><div class="line">:: The server could not connect to the client to verify the domain :: Failed to </div><div class="line">connect to 0.0.0.0:443 for TLS-SNI-01 challenge, example.com (tls-sni-01): </div><div class="line">urn:acme:error:connection :: The server could not connect to the client to verify the </div><div class="line">domain :: Failed to connect to 0.0.0.0:443 for TLS-SNI-01 challenge</div><div class="line"></div><div class="line">IMPORTANT NOTES:</div><div class="line"> - The following errors were reported by the server:</div><div class="line"></div><div class="line">   Domain: example.com</div><div class="line">   Type:   connection</div><div class="line">   Detail: Failed to connect to 0.0.0.0:443 for TLS-SNI-01</div><div class="line">   challenge</div><div class="line"></div><div class="line">   To fix these errors, please make sure that your domain name was</div><div class="line">   entered correctly and the DNS A record(s) for that domain</div><div class="line">   contain(s) the right IP address. Additionally, please check that</div><div class="line">   your computer has a publicly routable IP address and that no</div><div class="line">   firewalls are preventing the server from communicating with the</div><div class="line">   client. If you're using the webroot plugin, you should also verify</div><div class="line">   that you are serving files from the webroot path you provided.</div></pre></td></tr></table></figure>

<p>The standalone plugin runs its own simple web server to prove that you control the domain. Ownership or domain validation is the key here. It needs the current computer that just issued the <code>certbot</code> command to have a publicly routable IP address. That’s not going to be happening in my local computer behind NAT. And webroot plugin needs a running web server. It can’t be run from the local machine as well. Domain validation are done automatically with both <code>standalone</code> and <code>webroot</code> plugins. Furthermore, domain validation requests are coming from Let’s Encrypt servers, therefore, you can’t have the machine issuing the certificate request behind a NAT or load balancing methods without properly routing the requests.</p>
<p>Since automated methods mostly require the requester and domain owner to be residing on the same machine, we can try to move the request to the Google cloud. Otherwise, there is one more plugin to try, the manual plugin. The manual method (plugin) <em>helps you obtain a cert by giving you instructions to perform domain validation yourself</em>.</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/09/26/installing-let-s-encrypt-ssl-certificate-on-google-app-engine-using-certbot/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-09-25T12:00:00.000Z"><a href="/2016/09/25/installing-let-s-encrypt-certbot-0-8-x-on-debian-jessie/">Sep 25, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/09/25/installing-let-s-encrypt-certbot-0-8-x-on-debian-jessie/">Installing Let&#39;s Encrypt Certbot 0.8.x on Debian Jessie</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://letsencrypt.org/" target="_blank" rel="external">Let’s Encrypt</a> is a free, open, and automated certificate authority. And its <a href="https://certbot.eff.org/" target="_blank" rel="external">Certbot</a> is “a fully-featured, extensible client for the Let’s Encrypt CA (or any other CA that speaks the ACME protocol) that can automate the tasks of obtaining certificates and configuring webservers to use them.”[^1]</p>
<p>There are a number of ways to obtain and install SSL certificates issued by Let’s Encrypt CA. This is about installing Certbot 0.8.0 release on Debian Jessie. But before continuing, a few things to think about:</p>
<blockquote>
<p>The Let’s Encrypt Client (Certbot) presently only runs on Unix-ish OSes that include Python 2.6 or 2.7; Python 3.x support will hopefully be added in the future. … currently it supports modern OSes based on Debian, Fedora, SUSE, Gentoo and Darwin.[^1]</p>
</blockquote>
<p>That’s why using Docker container installation method might be a better choice, because it does not mess up your existing libraries and it can use supported operating systems which might not be the one you are using.</p>
<p>Anyhow, the current installation settings are:</p>
<ul>
<li>Debian 8.5 Jessie</li>
<li>Python 2.7.9</li>
<li>Certbot 0.8.0</li>
</ul>
<p><a href="https://certbot.eff.org/" target="_blank" rel="external">Certbot</a> is available for Debian Jessie via <a href="https://backports.debian.org/Instructions/" target="_blank" rel="external">backports</a>.</p>
<blockquote>
<p>Backports are recompiled packages from testing (mostly) and unstable (in a few cases only, e.g. security updates) in a stable environment so that they will run without new libraries (whenever it is possible) on a Debian stable distribution.</p>
<p>Backports cannot be tested as extensively as Debian stable, and backports are provided on an as-is basis, with risk of incompatibilities with other components in Debian stable. Use with care!</p>
<p>It is therefore recommended to select single backported packages that fit your needs, and not use all available backports.</p>
</blockquote>
<p>Again, there’s why it might be a better idea to use a container. But, let’s proceed.</p>
<p>Add a new file named <code>backports.list</code> to <code>/etc/apt/sources.list.d/</code> directory:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo bash -c 'echo "deb http://ftp.debian.org/debian jessie-backports main" > \</div><div class="line">  /etc/apt/sources.list.d/backports.list'</div></pre></td></tr></table></figure>

<p>Update:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update</div></pre></td></tr></table></figure>

<p>All backports are deactivated by default, therefore, to install Certbot package from backports, run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install certbot -t jessie-backports</div><div class="line">Reading package lists... Done</div><div class="line">Building dependency tree</div><div class="line">Reading state information... Done</div><div class="line">The following extra packages will be installed:</div><div class="line">  dialog python-acme python-certbot python-cffi-backend python-configargparse python-configobj python-cryptography</div><div class="line">  python-dialog python-enum34 python-funcsigs python-idna python-ipaddress python-mock python-ndg-httpsclient python-openssl</div><div class="line">  python-parsedatetime python-pbr python-psutil python-pyasn1 python-pyicu python-requests python-rfc3339 python-six</div><div class="line">  python-tz python-urllib3 python-zope.component python-zope.event python-zope.interface</div><div class="line">Suggested packages:</div><div class="line">  python-certbot-apache python-certbot-doc python-acme-doc python-configobj-doc python-cryptography-doc</div><div class="line">  python-cryptography-vectors python-enum34-doc python-funcsigs-doc python-mock-doc python-openssl-doc python-openssl-dbg</div><div class="line">  python-psutil-doc doc-base python-ntlm</div><div class="line">Recommended packages:</div><div class="line">  letsencrypt</div><div class="line">The following NEW packages will be installed:</div><div class="line">  certbot dialog python-acme python-certbot python-cffi-backend python-configargparse python-configobj python-cryptography</div><div class="line">  python-dialog python-enum34 python-funcsigs python-idna python-ipaddress python-mock python-ndg-httpsclient python-openssl</div><div class="line">  python-parsedatetime python-pbr python-psutil python-pyasn1 python-pyicu python-requests python-rfc3339 python-tz</div><div class="line">  python-urllib3 python-zope.component python-zope.event python-zope.interface</div><div class="line">The following packages will be upgraded:</div><div class="line">  python-six</div><div class="line">1 upgraded, 28 newly installed, 0 to remove and 163 not upgraded.</div><div class="line">Need to get 1,881 kB of archives.</div><div class="line">After this operation, 10.5 MB of additional disk space will be used.</div><div class="line">Do you want to continue? [Y/n]</div></pre></td></tr></table></figure>

<p>APT option <code>-t</code> lets you have simple control over which distribution packages will be retrieved from. In this case, the distribution <code>jessie-backports</code> is used.</p>
<p>Interesting to know that there is <code>letsencrypt</code> package, could this be the old client? Let’s query the APT’s package cache:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ apt-cache show letsencrypt</div><div class="line">Package: letsencrypt</div><div class="line">Source: python-certbot</div><div class="line">Version: 0.8.0-1~bpo8+2</div><div class="line">Installed-Size: 29</div><div class="line">Maintainer: Debian Let's Encrypt <letsencrypt-devel@lists.alioth.debian.org></letsencrypt-devel@lists.alioth.debian.org></div><div class="line">Architecture: all</div><div class="line">Depends: certbot</div><div class="line">Description-en: transitional dummy package</div><div class="line"> This is a transitional dummy package for the rename of letsencrypt to certbot.</div><div class="line"> It can safely be removed.</div></pre></td></tr></table></figure>

<p>Yes, it’s a dummy package. It has been renamed. And from the documentation:</p>
<blockquote>
<p>Until May 2016, Certbot was named simply <code>letsencrypt</code> or <code>letsencrypt-auto</code>, depending on install method.[^1]</p>
</blockquote>
<p>Let’s poke around on the installed package:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ certbot --version</div><div class="line">certbot 0.8.0</div></pre></td></tr></table></figure>

<p>It’s not yet <code>1.0</code>.</p>
<p>Obtaining the quick help:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">$ certbot --help</div><div class="line"></div><div class="line">  certbot [SUBCOMMAND] [options] [-d domain] [-d domain] ...</div><div class="line"></div><div class="line">Certbot can obtain and install HTTPS/TLS/SSL certificates.  By default,</div><div class="line">it will attempt to use a webserver both for obtaining and installing the</div><div class="line">cert. Major SUBCOMMANDS are:</div><div class="line"></div><div class="line">  (default) run        Obtain & install a cert in your current webserver</div><div class="line">  certonly             Obtain cert, but do not install it (aka "auth")</div><div class="line">  install              Install a previously obtained cert in a server</div><div class="line">  renew                Renew previously obtained certs that are near expiry</div><div class="line">  revoke               Revoke a previously obtained certificate</div><div class="line">  register             Perform tasks related to registering with the CA</div><div class="line">  rollback             Rollback server configuration changes made during install</div><div class="line">  config_changes       Show changes made to server config during installation</div><div class="line">  plugins              Display information about installed plugins</div><div class="line"></div><div class="line">Choice of server plugins for obtaining and installing cert:</div><div class="line"></div><div class="line">  (the apache plugin is not installed)</div><div class="line">  --standalone      Run a standalone webserver for authentication</div><div class="line">  (nginx support is experimental, buggy, and not installed by default)</div><div class="line">  --webroot         Place files in a server's webroot folder for authentication</div><div class="line"></div><div class="line">OR use different plugins to obtain (authenticate) the cert and then install it:</div><div class="line"></div><div class="line">  --authenticator standalone --installer apache</div><div class="line"></div><div class="line">More detailed help:</div><div class="line"></div><div class="line">  -h, --help [topic]    print this message, or detailed help on a topic;</div><div class="line">                        the available topics are:</div><div class="line"></div><div class="line">   all, automation, paths, security, testing, or any of the subcommands or</div><div class="line">   plugins (certonly, install, register, nginx, apache, standalone, webroot,</div><div class="line">   etc.)</div></pre></td></tr></table></figure>

<p>Now it’s time to obtain the certificate.</p>
<p>[^1]: <a href="https://certbot.eff.org/docs" target="_blank" rel="external">Certbot Documentation</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-09-12T12:00:00.000Z"><a href="/2016/09/12/randomizing-an-array-with-sort/">Sep 12, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/09/12/randomizing-an-array-with-sort/">Randomizing an Array with Sort</a></h1>
  

    </header>
    <div class="entry">
      
        <p>How to randomize an array? Use the <code>sort</code> command, with the option:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-R, <span class="comment">--random-sort</span></div><div class="line">    <span class="built_in">sort</span> <span class="keyword">by</span> <span class="built_in">random</span> hash <span class="operator">of</span> <span class="built_in">keys</span></div></pre></td></tr></table></figure>

<p>For example:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">$ seq <span class="number">1</span> <span class="number">10</span> | <span class="built_in">sort</span> -R</div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">10</span></div><div class="line"><span class="number">6</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">8</span></div><div class="line"><span class="number">1</span></div><div class="line">$ seq <span class="number">1</span> <span class="number">10</span> | <span class="built_in">sort</span> --random-<span class="built_in">sort</span></div><div class="line"><span class="number">9</span></div><div class="line"><span class="number">6</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">8</span></div><div class="line"><span class="number">7</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">10</span></div></pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-09-12T12:00:00.000Z"><a href="/2016/09/12/listing-tags-in-natural-sort-of-version-numbers/">Sep 12, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/09/12/listing-tags-in-natural-sort-of-version-numbers/">Listing Tags in Natural Sort of Version Numbers</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Using the Node.js repository as an example:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git remote -<span class="keyword">v</span></div><div class="line">origin  http<span class="variable">s:</span>//github.<span class="keyword">com</span>/nodejs/node.git (fetch)</div><div class="line">origin  http<span class="variable">s:</span>//github.<span class="keyword">com</span>/nodejs/node.git (push)</div></pre></td></tr></table></figure>

<p>If we would like to list all tags with <code>v0.12</code> versions, we could do:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ git tag <span class="operator">-l</span> <span class="string">'v0.12.*'</span></div><div class="line">v0.<span class="number">12.0</span></div><div class="line">v0.<span class="number">12.1</span></div><div class="line">v0.<span class="number">12.10</span></div><div class="line">v0.<span class="number">12.11</span></div><div class="line">v0.<span class="number">12.12</span></div><div class="line">v0.<span class="number">12.13</span></div><div class="line">v0.<span class="number">12.14</span></div><div class="line">v0.<span class="number">12.15</span></div><div class="line">v0.<span class="number">12.2</span></div><div class="line">v0.<span class="number">12.3</span></div><div class="line">v0.<span class="number">12.4</span></div><div class="line">v0.<span class="number">12.5</span></div><div class="line">v0.<span class="number">12.6</span></div><div class="line">v0.<span class="number">12.7</span></div><div class="line">v0.<span class="number">12.8</span></div><div class="line">v0.<span class="number">12.8</span>-rc.<span class="number">1</span></div><div class="line">v0.<span class="number">12.9</span></div></pre></td></tr></table></figure>

<p>However, <code>v0.12.2</code> should come after <code>v0.12.1</code>.</p>
<p>To fix it, we use the <code>sort</code> command with option:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-V, <span class="comment">--version-sort</span></div><div class="line">    natural <span class="built_in">sort</span> <span class="operator">of</span> (<span class="built_in">version</span>) numbers <span class="operator">within</span> <span class="keyword">text</span></div></pre></td></tr></table></figure>

<p>Thus:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ git <span class="keyword">tag</span> -<span class="keyword">l</span> <span class="string">'v0.12.*'</span> | <span class="built_in">sort</span> --<span class="keyword">version</span>-<span class="built_in">sort</span></div><div class="line">v0.<span class="number">12.0</span></div><div class="line">v0.<span class="number">12.1</span></div><div class="line">v0.<span class="number">12.2</span></div><div class="line">v0.<span class="number">12.3</span></div><div class="line">v0.<span class="number">12.4</span></div><div class="line">v0.<span class="number">12.5</span></div><div class="line">v0.<span class="number">12.6</span></div><div class="line">v0.<span class="number">12.7</span></div><div class="line">v0.<span class="number">12.8</span></div><div class="line">v0.<span class="number">12.8</span>-rc.<span class="number">1</span></div><div class="line">v0.<span class="number">12.9</span></div><div class="line">v0.<span class="number">12.10</span></div><div class="line">v0.<span class="number">12.11</span></div><div class="line">v0.<span class="number">12.12</span></div><div class="line">v0.<span class="number">12.13</span></div><div class="line">v0.<span class="number">12.14</span></div><div class="line">v0.<span class="number">12.15</span></div></pre></td></tr></table></figure>


      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-08-25T12:00:00.000Z"><a href="/2016/08/25/streaming-http-request-directly-to-response-in-node-js/">Aug 25, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/08/25/streaming-http-request-directly-to-response-in-node-js/">Streaming HTTP Request Directly to Response in Node.js</a></h1>
  

    </header>
    <div class="entry">
      
        <p>This is a <a href="https://nodejs.org/" target="_blank" rel="external">Node.js</a> starting script to stream HTTP request directly into response:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span><span class="function"><span class="params">(<span class="string">'http'</span>)</span>.<span class="title">createServer</span><span class="params">((req, res) =&gt; {</span></span></div><div class="line">  req.pipe(res); <span class="regexp">//</span> Pipe request directly to response</div><div class="line">}).<span class="title">listen</span><span class="params">(<span class="number">3000</span>)</span>;</div></pre></td></tr></table></figure>

<p>It behaves almost like an echo, you get back whatever you sent. For example, use <a href="https://github.com/jkbrzt/httpie" target="_blank" rel="external">HTTPie</a> to make a request to the above server:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$ echo foo | http <span class="comment">--verbose --stream :3000 Content-Type:text/plain</span></div><div class="line">POST / HTTP/<span class="number">1.1</span></div><div class="line">Accept: <span class="type">application</span>/json, */*</div><div class="line">Accept-Encoding: gzip, deflate</div><div class="line">Connection: keep-alive</div><div class="line">Content-Length: <span class="number">4</span></div><div class="line">Host: localhost:<span class="number">3000</span></div><div class="line">User-Agent: HTTPie/<span class="number">0.9</span><span class="number">.6</span></div><div class="line">Content-Type: <span class="type">text</span>/plain</div><div class="line"></div><div class="line">foo</div><div class="line"></div><div class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</div><div class="line">Connection: keep-alive</div><div class="line">Transfer-Encoding: chunked</div><div class="line"></div><div class="line">foo</div></pre></td></tr></table></figure>

<p>We can also add the <code>Content-Type</code> response header to echo back what the entire media type is after assembling all chunks.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span><span class="function"><span class="params">(<span class="string">'http'</span>)</span>.<span class="title">createServer</span><span class="params">((req, res) =&gt; {</span></span></div><div class="line">  req.pipe(res); <span class="regexp">//</span> Pipe request directly to response</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (req.headers[<span class="string">'content-type'</span>]) {</div><div class="line">    res.setHeader(<span class="string">'Content-Type'</span>, req.headers[<span class="string">'content-type'</span>]);</div><div class="line">  }</div><div class="line">}).<span class="title">listen</span><span class="params">(<span class="number">3000</span>)</span>;</div></pre></td></tr></table></figure>

<p>The response should have the <code>Content-Type</code> field as below:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="status">HTTP/1.1 <span class="number">200</span> OK</span></div><div class="line"><span class="attribute">Connection</span>: <span class="string">keep-alive</span></div><div class="line"><span class="attribute">Content-Type</span>: <span class="string">text/plain</span></div><div class="line"><span class="attribute">Transfer-Encoding</span>: <span class="string">chunked</span></div><div class="line"></div><div class="line"><span class="undefined">foo</span></div></pre></td></tr></table></figure>

<p>Notice that instead of usual <code>Content-Length</code> in the response header, we’ve got <code>Transfer-Encoding: chunked</code>. The default transfer encoding for Node.js HTTP is <code>chunked</code>:</p>
<blockquote>
<p>Sending a ‘Content-length’ header will disable the default chunked encoding.[^1]</p>
</blockquote>
<p>About transfer encoding:</p>
<blockquote>
<p>Chunked transfer encoding is a data transfer mechanism in version 1.1 of the Hypertext Transfer Protocol (HTTP) in which data is sent in a series of “chunks”. It uses the Transfer-Encoding HTTP header in place of the Content-Length header, which the earlier version of the protocol would otherwise require. Because the Content-Length header is not used, the sender does not need to know the length of the content before it starts transmitting a response to the receiver. Senders can begin transmitting dynamically-generated content before knowing the total size of that content. … The size of each chunk is sent right before the chunk itself so that the receiver can tell when it has finished receiving data for that chunk. The data transfer is terminated by a final chunk of length zero.[^2]</p>
</blockquote>
<p>With the above starting script, now you can attach some <a href="https://nodejs.org/api/stream.html#stream_class_stream_transform" target="_blank" rel="external">transform streams</a> to manipulate the request and stream back in chunked response.</p>
<p>Settings:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ node <span class="comment">--version</span></div><div class="line">v6<span class="number">.3</span><span class="number">.1</span></div><div class="line">$ <span class="keyword">http</span> <span class="comment">--version</span></div><div class="line"><span class="number">0.9</span><span class="number">.6</span></div></pre></td></tr></table></figure>

<p>[^1]: <a href="https://nodejs.org/api/http.html" target="_blank" rel="external">HTTP</a>, Node.js API Docs</p>
<p>[^2]: <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding" target="_blank" rel="external">Chunked transfer encoding</a>, Wikipedia</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-08-25T12:00:00.000Z"><a href="/2016/08/25/installing-caddy-0-9-x-on-ubuntu-debian-system/">Aug 25, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/08/25/installing-caddy-0-9-x-on-ubuntu-debian-system/">Installing Caddy 0.9.x on Ubuntu/Debian System</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Install <a href="https://caddyserver.com/" target="_blank" rel="external">Caddy</a> via its <a href="https://getcaddy.com/" target="_blank" rel="external">installer script</a> on Ubuntu/Debian system:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ curl <span class="attribute">-s</span> https:<span class="comment">//getcaddy.com/ | sudo bash</span></div><div class="line">Downloading Caddy for linux/amd64<span class="attribute">...</span></div><div class="line">https:<span class="comment">//caddyserver.com/download/build?os=linux&arch=amd64&arm=&features=</span></div><div class="line">Extracting<span class="attribute">...</span></div><div class="line">Putting caddy <span class="keyword">in</span> /usr/<span class="built_in">local</span>/bin (may <span class="keyword">require</span> password)</div><div class="line">Caddy <span class="number">0.9</span><span class="number">.1</span> (<span class="subst">+</span>e8e5595)</div><div class="line">Successfully installed</div></pre></td></tr></table></figure>

<p>This is different from the <a href="https://caddyserver.com/download" target="_blank" rel="external">Download</a> page, where you get to select additional features (see the <code>&amp;features=</code> URL query parameter).</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ which caddy</div><div class="line">caddy is <span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>caddy</div></pre></td></tr></table></figure>

<p>Get the installed version:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ caddy --<span class="keyword">version</span></div><div class="line">Caddy <span class="number">0.9</span>.<span class="number">1</span> (+e8e5595)</div></pre></td></tr></table></figure>

<p>Get help:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">$ caddy -h</div><div class="line">Usage <span class="keyword">of</span> caddy:</div><div class="line">  -agree</div><div class="line">        Agree <span class="keyword">to</span> the CA<span class="attribute">'s</span> Subscriber Agreement</div><div class="line">  -ca <span class="typename">string</span></div><div class="line">        URL <span class="keyword">to</span> certificate authority<span class="attribute">'s</span> ACME server directory (<span class="keyword">default</span> <span class="string">"https://acme-v01.api.letsencrypt.org/directory"</span>)</div><div class="line">  -conf <span class="typename">string</span></div><div class="line">        Caddyfile <span class="keyword">to</span> load (<span class="keyword">default</span> <span class="string">"Caddyfile"</span>)</div><div class="line">  -cpu <span class="typename">string</span></div><div class="line">        CPU cap (<span class="keyword">default</span> <span class="string">"100%"</span>)</div><div class="line">  -email <span class="typename">string</span></div><div class="line">        <span class="keyword">Default</span> ACME CA account email address</div><div class="line">  -grace duration</div><div class="line">        Maximum duration <span class="keyword">of</span> graceful shutdown (<span class="keyword">default</span> <span class="number">5</span>s)</div><div class="line">  -host <span class="typename">string</span></div><div class="line">        <span class="keyword">Default</span> host</div><div class="line">  -http2</div><div class="line">        <span class="keyword">Use</span> HTTP/<span class="number">2</span> (<span class="keyword">default</span> true)</div><div class="line">  -log <span class="typename">string</span></div><div class="line">        <span class="keyword">Process</span> log <span class="keyword">file</span></div><div class="line">  -pidfile <span class="typename">string</span></div><div class="line">        Path <span class="keyword">to</span> write pid <span class="keyword">file</span></div><div class="line">  -plugins</div><div class="line">        List installed plugins</div><div class="line">  -<span class="keyword">port</span> <span class="typename">string</span></div><div class="line">        <span class="keyword">Default</span> <span class="keyword">port</span> (<span class="keyword">default</span> <span class="string">"2015"</span>)</div><div class="line">  -quic</div><div class="line">        <span class="keyword">Use</span> experimental QUIC</div><div class="line">  -quiet</div><div class="line">        Quiet mode (no initialization output)</div><div class="line">  -revoke <span class="typename">string</span></div><div class="line">        Hostname <span class="keyword">for</span> which <span class="keyword">to</span> revoke the certificate</div><div class="line">  -root <span class="typename">string</span></div><div class="line">        Root path <span class="keyword">of</span> <span class="keyword">default</span> site (<span class="keyword">default</span> <span class="string">"."</span>)</div><div class="line">  -<span class="keyword">type</span> <span class="typename">string</span></div><div class="line">        <span class="keyword">Type</span> <span class="keyword">of</span> server <span class="keyword">to</span> run (<span class="keyword">default</span> <span class="string">"http"</span>)</div><div class="line">  -version</div><div class="line">        Show version</div></pre></td></tr></table></figure>

<p>Run Caddy locally:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ caddy</div><div class="line">Activating privacy features... done.</div><div class="line">http://:2015</div><div class="line"><span class="label">WARNING: </span>File descriptor limit 1024 is too low for production servers. At least 8192 is recommended. Fix with "ulimit -n 8192".</div></pre></td></tr></table></figure>

<p>A file descriptor is simply a number that the operating system assigns to an open file to keep track of it. Caddy’s primary goal is to be an easy-to-use static file web server. Having high file descriptor limit means it can open more files to serve users at the same time.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ </span>ulimit -<span class="constant">Sn</span> && ulimit -<span class="constant">Hn</span></div><div class="line"><span class="number">1024</span></div><div class="line"><span class="number">4096</span></div></pre></td></tr></table></figure>

<p>The current system is too low in both soft and hard limits. But since it’s not in production, warning can be ignored.</p>
<p>Make sure the server working:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ http :<span class="number">2015</span></div><div class="line">HTTP/<span class="number">1.1</span> <span class="number">404</span> <span class="keyword">Not</span> Found</div><div class="line">Content-<span class="keyword">Length</span>: <span class="number">14</span></div><div class="line">Content-Type: text/plain; charset=utf-<span class="number">8</span></div><div class="line">Server: Caddy</div><div class="line">X-Content-Type-<span class="keyword">Options</span>: nosniff</div><div class="line"></div><div class="line"><span class="number">404</span> <span class="keyword">Not</span> Found</div></pre></td></tr></table></figure>

<p>Response header <code>X-Content-Type-Options: nosniff</code> prevents MIME based attacks, it tells the browser to respect the response content type, not to override.</p>
<p>Status code <code>404</code> means working, but just lacks an index file. Let’s create one:</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/08/25/installing-caddy-0-9-x-on-ubuntu-debian-system/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-08-18T12:00:00.000Z"><a href="/2016/08/18/accessing-upwork-json-data-without-the-api/">Aug 18, 2016</a></time>
      
      
  
    <h1 class="title"><a href="/2016/08/18/accessing-upwork-json-data-without-the-api/">Accessing Upwork JSON Data without the API</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://www.upwork.com/" target="_blank" rel="external">Upwork</a>, formerly Elance-oDesk, is the world’s largest freelancing marketplace. I’m interested to know what types of jobs they are in the platform, and how many. For a lazy programmer, browsing each job category and clicking on each link, and copying those numbers is not the way to go. I need to automate this. There is an <a href="https://developers.upwork.com/" target="_blank" rel="external">API</a>. But before diving into the API documentation, let’s see if there is another way (“Rule of Diversity”).</p>
<p>Before continuing, a word of warning, <strong>this is prohibited</strong>:</p>
<blockquote>
<p>Using any robot, spider, scraper, or other automated means to access the Site for any purpose without our express written permission or collecting or harvesting any personally identifiable information, including Account names, from the Site;[^2]</p>
</blockquote>
<p>After poking around the web app, it communicates with its backend by using <a href="http://json.org/" target="_blank" rel="external">JSON</a> data exchange format via the URL: <a href="https://www.upwork.com/o/jobs/browse/url" target="_blank" rel="external">https://www.upwork.com/o/jobs/browse/url</a>. However, if accessing the URL directly, it will respond with 404 page not exist error. Something is missing.</p>
<p>Well, the web app is able to successfully make the request, so this is not difficult to tackle. Just use the process of elimination from the working request, it will reveal the required information.</p>
<p>After a couple tries, just need to add the request header: <code>X-Requested-With: XMLHttpRequest</code>, then the JSON response with the status code <code>200</code> will be returned:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ http --verbose https://<span class="filename">www.upwork.com/o/jobs/browse/url \</span></div><div class="line">  X-Requested-With:XMLHttpRequest</div><div class="line">GET /o/jobs/browse/url HTTP/<span class="number">1.1</span></div><div class="line">Accept: */*</div><div class="line">Accept-Encoding: gzip, deflate</div><div class="line">Connection: keep-alive</div><div class="line">Host: <span class="filename">www.upwork.com</span></div><div class="line">User-Agent: HTTPie/<span class="number">0.9</span><span class="number">.6</span></div><div class="line">X-Requested-With: XMLHttpRequest</div></pre></td></tr></table></figure>

<p>The default sort is by creation time in descending order, so you don’t need to add the query parameters: <code>sort==create_time+desc</code> (<a href="https://github.com/jkbrzt/httpie" target="_blank" rel="external">HTTPie</a>).</p>
<p>Let’s load the response data into Node.js and perform a quick analysis:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">$ node</div><div class="line">&gt; data = <span class="built_in">require</span>(<span class="string">'./upwork.json'</span>)</div><div class="line">{ url: <span class="string">'/o/jobs/browse/'</span>,</div><div class="line">  searchResults:</div><div class="line">   { q: <span class="string">''</span>,</div><div class="line">     paging: { total: <span class="number">87654</span>, offset: <span class="number">0</span> },</div><div class="line">     spellcheck: { corrected_queries: [] },</div><div class="line">     jobs:</div><div class="line">      [ [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>],</div><div class="line">        [<span class="built_in">Object</span>] ],</div><div class="line">     smartSearch: { downloadTeamApplication: <span class="literal">false</span> },</div><div class="line">     facets:</div><div class="line">      { jobType: [<span class="built_in">Object</span>],</div><div class="line">        workload: [<span class="built_in">Object</span>],</div><div class="line">        duration: [<span class="built_in">Object</span>],</div><div class="line">        clientHires: [<span class="built_in">Object</span>],</div><div class="line">        contractorTier: [<span class="built_in">Object</span>],</div><div class="line">        categories: [<span class="built_in">Object</span>],</div><div class="line">        previousClients: [<span class="built_in">Object</span>],</div><div class="line">        subcategories: [] },</div><div class="line">     isSearchWithEmptyParams: <span class="literal">true</span>,</div><div class="line">     subcategories: [],</div><div class="line">     currentQuery: {},</div><div class="line">     rssLink: <span class="string">'/ab/feed/jobs/rss?api_params=1&q='</span>,</div><div class="line">     atomLink: <span class="string">'/ab/feed/jobs/atom?api_params=1&q='</span>,</div><div class="line">     queryParsedParams: [],</div><div class="line">     pageTitle: <span class="string">'Freelance Jobs - Upwork'</span> } }</div></pre></td></tr></table></figure>

<p>The property <code>searchResults.paging.total</code> is the total number of jobs available:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="tag">data</span><span class="class">.searchResults</span><span class="class">.paging</span></div><div class="line"><span class="rules">{ <span class="rule"><span class="attribute">total</span>:<span class="value"> <span class="number">87654</span>, offset: <span class="number">0</span> </span></span></span>}</div></pre></td></tr></table></figure>

<p>But, the number is different from the web app, a lot less, 50% less jobs found. Is that because the request is not recognized as a logged-in user? Let’s find out.</p>

      
    </div>
    <footer>
      
        
          <div class="alignleft">
            <a href="/2016/08/18/accessing-upwork-json-data-without-the-api/#more" class="more-link">Read More</a>
          </div>
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



  

  <nav id="pagination">
  
  
    <a href="/archives/2016/page/2/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:realguess.net">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/cloud/">Cloud</a><small>11</small></li>
  
    <li><a href="/categories/coding/">Coding</a><small>9</small></li>
  
    <li><a href="/categories/communication/">Communication</a><small>1</small></li>
  
    <li><a href="/categories/computing/">Computing</a><small>4</small></li>
  
    <li><a href="/categories/data-processing/">Data Processing</a><small>0</small></li>
  
    <li><a href="/categories/data-science/">Data Science</a><small>2</small></li>
  
    <li><a href="/categories/devops/">DevOps</a><small>20</small></li>
  
    <li><a href="/categories/javascript/">JavaScript</a><small>17</small></li>
  
    <li><a href="/categories/linux/">Linux</a><small>4</small></li>
  
    <li><a href="/categories/node-js-and-io-js/">Node.js and io.js</a><small>0</small></li>
  
    <li><a href="/categories/pathfinder/">Pathfinder</a><small>1</small></li>
  
    <li><a href="/categories/philosophy/">Philosophy</a><small>1</small></li>
  
    <li><a href="/categories/productivity/">Productivity</a><small>1</small></li>
  
    <li><a href="/categories/programming/">Programming</a><small>0</small></li>
  
    <li><a href="/categories/security/">Security</a><small>1</small></li>
  
    <li><a href="/categories/starters/">Starters</a><small>0</small></li>
  
    <li><a href="/categories/statistics/">Statistics</a><small>5</small></li>
  
    <li><a href="/categories/test/">Test</a><small>2</small></li>
  
    <li><a href="/categories/tools/">Tools</a><small>18</small></li>
  
    <li><a href="/categories/travel/">Travel</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/2013/">2013</a><small>1</small></li>
  
    <li><a href="/tags/2014/">2014</a><small>3</small></li>
  
    <li><a href="/tags/2015/">2015</a><small>1</small></li>
  
    <li><a href="/tags/abraham-lincoln/">abraham-lincoln</a><small>1</small></li>
  
    <li><a href="/tags/absolute-path/">absolute-path</a><small>1</small></li>
  
    <li><a href="/tags/accept-ranges/">accept-ranges</a><small>1</small></li>
  
    <li><a href="/tags/accessor-property/">accessor-property</a><small>1</small></li>
  
    <li><a href="/tags/aftereach/">aftereach</a><small>1</small></li>
  
    <li><a href="/tags/agenda/">agenda</a><small>1</small></li>
  
    <li><a href="/tags/alexa/">alexa</a><small>3</small></li>
  
    <li><a href="/tags/alias/">alias</a><small>1</small></li>
  
    <li><a href="/tags/amazon/">amazon</a><small>6</small></li>
  
    <li><a href="/tags/amazon-s3/">amazon-s3</a><small>2</small></li>
  
    <li><a href="/tags/amazon-s3api/">amazon-s3api</a><small>1</small></li>
  
    <li><a href="/tags/amazon-sqs/">amazon-sqs</a><small>1</small></li>
  
    <li><a href="/tags/amtrak/">amtrak</a><small>2</small></li>
  
    <li><a href="/tags/android/">android</a><small>1</small></li>
  
    <li><a href="/tags/android-4-3/">android-4.3</a><small>1</small></li>
  
    <li><a href="/tags/anonymous/">anonymous</a><small>1</small></li>
  
    <li><a href="/tags/anonymous-function/">anonymous-function</a><small>1</small></li>
  
    <li><a href="/tags/anonymous-like/">anonymous-like</a><small>1</small></li>
  
    <li><a href="/tags/anonymous-login/">anonymous-login</a><small>1</small></li>
  
    <li><a href="/tags/ansible/">ansible</a><small>1</small></li>
  
    <li><a href="/tags/app-engine/">app-engine</a><small>2</small></li>
  
    <li><a href="/tags/apple/">apple</a><small>1</small></li>
  
    <li><a href="/tags/apt-get/">apt-get</a><small>2</small></li>
  
    <li><a href="/tags/array/">array</a><small>4</small></li>
  
    <li><a href="/tags/async/">async</a><small>1</small></li>
  
    <li><a href="/tags/asynchronous/">asynchronous</a><small>2</small></li>
  
    <li><a href="/tags/automated-build/">automated-build</a><small>1</small></li>
  
    <li><a href="/tags/automatic-link/">automatic-link</a><small>1</small></li>
  
    <li><a href="/tags/automation/">automation</a><small>2</small></li>
  
    <li><a href="/tags/awk/">awk</a><small>1</small></li>
  
    <li><a href="/tags/aws/">aws</a><small>9</small></li>
  
    <li><a href="/tags/aws-cli/">aws-cli</a><small>5</small></li>
  
    <li><a href="/tags/aws-sdk/">aws-sdk</a><small>1</small></li>
  
    <li><a href="/tags/backports/">backports</a><small>1</small></li>
  
    <li><a href="/tags/backslash/">backslash</a><small>1</small></li>
  
    <li><a href="/tags/bash/">bash</a><small>3</small></li>
  
    <li><a href="/tags/batch/">batch</a><small>1</small></li>
  
    <li><a href="/tags/beforeeach/">beforeeach</a><small>1</small></li>
  
    <li><a href="/tags/best-practice/">best-practice</a><small>2</small></li>
  
    <li><a href="/tags/big-apple/">big-apple</a><small>1</small></li>
  
    <li><a href="/tags/big-easy/">big-easy</a><small>2</small></li>
  
    <li><a href="/tags/big-number/">big-number</a><small>1</small></li>
  
    <li><a href="/tags/bind/">bind</a><small>1</small></li>
  
    <li><a href="/tags/bind9/">bind9</a><small>1</small></li>
  
    <li><a href="/tags/binding/">binding</a><small>1</small></li>
  
    <li><a href="/tags/bintray/">bintray</a><small>1</small></li>
  
    <li><a href="/tags/bitbucket/">bitbucket</a><small>2</small></li>
  
    <li><a href="/tags/blog/">blog</a><small>4</small></li>
  
    <li><a href="/tags/boss/">boss</a><small>1</small></li>
  
    <li><a href="/tags/brace-expansion/">brace-expansion</a><small>1</small></li>
  
    <li><a href="/tags/bret-victor/">bret-victor</a><small>1</small></li>
  
    <li><a href="/tags/browser/">browser</a><small>1</small></li>
  
    <li><a href="/tags/browser-sync/">browser-sync</a><small>1</small></li>
  
    <li><a href="/tags/buffer/">buffer</a><small>1</small></li>
  
    <li><a href="/tags/busybox/">busybox</a><small>1</small></li>
  
    <li><a href="/tags/byobu/">byobu</a><small>1</small></li>
  
    <li><a href="/tags/ca/">ca</a><small>1</small></li>
  
    <li><a href="/tags/caddy/">caddy</a><small>1</small></li>
  
    <li><a href="/tags/caret/">caret</a><small>1</small></li>
  
    <li><a href="/tags/caret-range/">caret-range</a><small>1</small></li>
  
    <li><a href="/tags/cat/">cat</a><small>1</small></li>
  
    <li><a href="/tags/certbot/">certbot</a><small>4</small></li>
  
    <li><a href="/tags/certificate-authority/">certificate-authority</a><small>1</small></li>
  
    <li><a href="/tags/chai/">chai</a><small>1</small></li>
  
    <li><a href="/tags/changelog/">changelog</a><small>1</small></li>
  
    <li><a href="/tags/chat/">chat</a><small>1</small></li>
  
    <li><a href="/tags/chrome/">chrome</a><small>1</small></li>
  
    <li><a href="/tags/chunghwa-telecom/">chunghwa-telecom</a><small>1</small></li>
  
    <li><a href="/tags/chunked/">chunked</a><small>1</small></li>
  
    <li><a href="/tags/cli/">cli</a><small>13</small></li>
  
    <li><a href="/tags/cloud-storage/">cloud-storage</a><small>1</small></li>
  
    <li><a href="/tags/cloud9/">cloud9</a><small>1</small></li>
  
    <li><a href="/tags/cm/">cm</a><small>1</small></li>
  
    <li><a href="/tags/cname/">cname</a><small>1</small></li>
  
    <li><a href="/tags/cocoon/">cocoon</a><small>1</small></li>
  
    <li><a href="/tags/coding-style/">coding-style</a><small>4</small></li>
  
    <li><a href="/tags/coffeelint/">coffeelint</a><small>1</small></li>
  
    <li><a href="/tags/coffeescript/">coffeescript</a><small>7</small></li>
  
    <li><a href="/tags/color/">color</a><small>1</small></li>
  
    <li><a href="/tags/comcast/">comcast</a><small>1</small></li>
  
    <li><a href="/tags/command-history/">command-history</a><small>1</small></li>
  
    <li><a href="/tags/command-line/">command-line</a><small>11</small></li>
  
    <li><a href="/tags/command-line-interface/">command-line-interface</a><small>0</small></li>
  
    <li><a href="/tags/compare/">compare</a><small>1</small></li>
  
    <li><a href="/tags/compose/">compose</a><small>1</small></li>
  
    <li><a href="/tags/configuration/">configuration</a><small>1</small></li>
  
    <li><a href="/tags/configuration-management/">configuration-management</a><small>1</small></li>
  
    <li><a href="/tags/console/">console</a><small>1</small></li>
  
    <li><a href="/tags/container/">container</a><small>1</small></li>
  
    <li><a href="/tags/content-length/">content-length</a><small>1</small></li>
  
    <li><a href="/tags/content-type/">content-type</a><small>1</small></li>
  
    <li><a href="/tags/context/">context</a><small>2</small></li>
  
    <li><a href="/tags/control-character/">control-character</a><small>1</small></li>
  
    <li><a href="/tags/coreutils/">coreutils</a><small>1</small></li>
  
    <li><a href="/tags/cors/">cors</a><small>1</small></li>
  
    <li><a href="/tags/create-indexes/">create-indexes</a><small>1</small></li>
  
    <li><a href="/tags/crescent/">crescent</a><small>1</small></li>
  
    <li><a href="/tags/crlf/">crlf</a><small>1</small></li>
  
    <li><a href="/tags/cron/">cron</a><small>2</small></li>
  
    <li><a href="/tags/crontab/">crontab</a><small>1</small></li>
  
    <li><a href="/tags/crypto/">crypto</a><small>2</small></li>
  
    <li><a href="/tags/cryptography/">cryptography</a><small>1</small></li>
  
    <li><a href="/tags/curl/">curl</a><small>2</small></li>
  
    <li><a href="/tags/custom-domain/">custom-domain</a><small>2</small></li>
  
    <li><a href="/tags/custom-generator/">custom-generator</a><small>1</small></li>
  
    <li><a href="/tags/cut/">cut</a><small>2</small></li>
  
    <li><a href="/tags/cwd/">cwd</a><small>1</small></li>
  
    <li><a href="/tags/data-retrieval/">data-retrieval</a><small>1</small></li>
  
    <li><a href="/tags/data-volume/">data-volume</a><small>2</small></li>
  
    <li><a href="/tags/database/">database</a><small>1</small></li>
  
    <li><a href="/tags/datagram/">datagram</a><small>1</small></li>
  
    <li><a href="/tags/dataset/">dataset</a><small>1</small></li>
  
    <li><a href="/tags/datastore/">datastore</a><small>1</small></li>
  
    <li><a href="/tags/date/">date</a><small>2</small></li>
  
    <li><a href="/tags/db/">db</a><small>1</small></li>
  
    <li><a href="/tags/debian/">debian</a><small>3</small></li>
  
    <li><a href="/tags/debian-jessie/">debian-jessie</a><small>2</small></li>
  
    <li><a href="/tags/december/">december</a><small>1</small></li>
  
    <li><a href="/tags/delete/">delete</a><small>1</small></li>
  
    <li><a href="/tags/delimiter/">delimiter</a><small>1</small></li>
  
    <li><a href="/tags/dependency/">dependency</a><small>3</small></li>
  
    <li><a href="/tags/development/">development</a><small>1</small></li>
  
    <li><a href="/tags/development-environment/">development-environment</a><small>1</small></li>
  
    <li><a href="/tags/diff/">diff</a><small>2</small></li>
  
    <li><a href="/tags/digest/">digest</a><small>1</small></li>
  
    <li><a href="/tags/directives-end-marker/">directives-end-marker</a><small>1</small></li>
  
    <li><a href="/tags/directory/">directory</a><small>1</small></li>
  
    <li><a href="/tags/dirname/">dirname</a><small>1</small></li>
  
    <li><a href="/tags/dispatch/">dispatch</a><small>1</small></li>
  
    <li><a href="/tags/distributed/">distributed</a><small>1</small></li>
  
    <li><a href="/tags/distributed-team/">distributed-team</a><small>1</small></li>
  
    <li><a href="/tags/dns/">dns</a><small>3</small></li>
  
    <li><a href="/tags/dns114/">dns114</a><small>1</small></li>
  
    <li><a href="/tags/docco/">docco</a><small>1</small></li>
  
    <li><a href="/tags/docker/">docker</a><small>14</small></li>
  
    <li><a href="/tags/dockerfile/">dockerfile</a><small>3</small></li>
  
    <li><a href="/tags/domain/">domain</a><small>1</small></li>
  
    <li><a href="/tags/dsn-server/">dsn-server</a><small>1</small></li>
  
    <li><a href="/tags/duplicate-keys/">duplicate-keys</a><small>1</small></li>
  
    <li><a href="/tags/duplication/">duplication</a><small>1</small></li>
  
    <li><a href="/tags/ec2/">ec2</a><small>3</small></li>
  
    <li><a href="/tags/echo/">echo</a><small>2</small></li>
  
    <li><a href="/tags/ecmascript-harmony/">ecmascript-harmony</a><small>1</small></li>
  
    <li><a href="/tags/encryption/">encryption</a><small>1</small></li>
  
    <li><a href="/tags/environment/">environment</a><small>3</small></li>
  
    <li><a href="/tags/environment-variable/">environment-variable</a><small>2</small></li>
  
    <li><a href="/tags/eol/">eol</a><small>1</small></li>
  
    <li><a href="/tags/ephemeral/">ephemeral</a><small>1</small></li>
  
    <li><a href="/tags/escape-character/">escape-character</a><small>1</small></li>
  
    <li><a href="/tags/expiration/">expiration</a><small>1</small></li>
  
    <li><a href="/tags/explicit-document/">explicit-document</a><small>1</small></li>
  
    <li><a href="/tags/express/">express</a><small>3</small></li>
  
    <li><a href="/tags/extended-pattern-matching/">extended-pattern-matching</a><small>1</small></li>
  
    <li><a href="/tags/extglob/">extglob</a><small>1</small></li>
  
    <li><a href="/tags/facebook/">facebook</a><small>1</small></li>
  
    <li><a href="/tags/field/">field</a><small>1</small></li>
  
    <li><a href="/tags/file-system/">file-system</a><small>1</small></li>
  
    <li><a href="/tags/filename/">filename</a><small>1</small></li>
  
    <li><a href="/tags/firewall/">firewall</a><small>1</small></li>
  
    <li><a href="/tags/folder/">folder</a><small>1</small></li>
  
    <li><a href="/tags/fs/">fs</a><small>1</small></li>
  
    <li><a href="/tags/function/">function</a><small>4</small></li>
  
    <li><a href="/tags/function-declaration/">function-declaration</a><small>2</small></li>
  
    <li><a href="/tags/function-expression/">function-expression</a><small>3</small></li>
  
    <li><a href="/tags/function-innovation/">function-innovation</a><small>1</small></li>
  
    <li><a href="/tags/gae/">gae</a><small>2</small></li>
  
    <li><a href="/tags/gce/">gce</a><small>2</small></li>
  
    <li><a href="/tags/gcloud/">gcloud</a><small>4</small></li>
  
    <li><a href="/tags/generator/">generator</a><small>1</small></li>
  
    <li><a href="/tags/get/">get</a><small>2</small></li>
  
    <li><a href="/tags/getter/">getter</a><small>2</small></li>
  
    <li><a href="/tags/ghost/">ghost</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>4</small></li>
  
    <li><a href="/tags/git-branch/">git-branch</a><small>1</small></li>
  
    <li><a href="/tags/git-tag/">git-tag</a><small>1</small></li>
  
    <li><a href="/tags/gitlab/">gitLab</a><small>0</small></li>
  
    <li><a href="/tags/github/">github</a><small>4</small></li>
  
    <li><a href="/tags/github-pages/">github-pages</a><small>1</small></li>
  
    <li><a href="/tags/gitlab/">gitlab</a><small>1</small></li>
  
    <li><a href="/tags/glob/">glob</a><small>1</small></li>
  
    <li><a href="/tags/gnome/">gnome</a><small>1</small></li>
  
    <li><a href="/tags/gnu/">gnu</a><small>1</small></li>
  
    <li><a href="/tags/goal/">goal</a><small>1</small></li>
  
    <li><a href="/tags/google-analytics/">google-analytics</a><small>4</small></li>
  
    <li><a href="/tags/google-app-engine/">google-app-engine</a><small>1</small></li>
  
    <li><a href="/tags/google-cloud-datastore/">google-cloud-datastore</a><small>3</small></li>
  
    <li><a href="/tags/google-cloud-platform/">google-cloud-platform</a><small>2</small></li>
  
    <li><a href="/tags/google-cloud-pubsub/">google-cloud-pubsub</a><small>1</small></li>
  
    <li><a href="/tags/google-compute-engine/">google-compute-engine</a><small>3</small></li>
  
    <li><a href="/tags/google-keep/">google-keep</a><small>1</small></li>
  
    <li><a href="/tags/google-trends/">google-trends</a><small>1</small></li>
  
    <li><a href="/tags/grep/">grep</a><small>1</small></li>
  
    <li><a href="/tags/groupthink/">groupthink</a><small>1</small></li>
  
    <li><a href="/tags/grunt/">grunt</a><small>1</small></li>
  
    <li><a href="/tags/grunt-contrib-jshint/">grunt-contrib-jshint</a><small>1</small></li>
  
    <li><a href="/tags/grunt-contrib-watch/">grunt-contrib-watch</a><small>1</small></li>
  
    <li><a href="/tags/guard/">guard</a><small>1</small></li>
  
    <li><a href="/tags/gulp/">gulp</a><small>2</small></li>
  
    <li><a href="/tags/hackathon/">hackathon</a><small>1</small></li>
  
    <li><a href="/tags/head/">head</a><small>2</small></li>
  
    <li><a href="/tags/heartbleed/">heartbleed</a><small>1</small></li>
  
    <li><a href="/tags/hexo/">hexo</a><small>1</small></li>
  
    <li><a href="/tags/hipchat/">hipchat</a><small>1</small></li>
  
    <li><a href="/tags/hollywood/">hollywood</a><small>1</small></li>
  
    <li><a href="/tags/hong-kong/">hong-kong</a><small>1</small></li>
  
    <li><a href="/tags/host/">host</a><small>1</small></li>
  
    <li><a href="/tags/hosted-zone/">hosted-zone</a><small>1</small></li>
  
    <li><a href="/tags/hosts/">hosts</a><small>1</small></li>
  
    <li><a href="/tags/hotlinking/">hotlinking</a><small>1</small></li>
  
    <li><a href="/tags/http/">http</a><small>7</small></li>
  
    <li><a href="/tags/http-method/">http-method</a><small>1</small></li>
  
    <li><a href="/tags/http-server/">http-server</a><small>1</small></li>
  
    <li><a href="/tags/id/">id</a><small>1</small></li>
  
    <li><a href="/tags/ide/">ide</a><small>1</small></li>
  
    <li><a href="/tags/identifier/">identifier</a><small>1</small></li>
  
    <li><a href="/tags/iife/">iife</a><small>2</small></li>
  
    <li><a href="/tags/imessage/">imessage</a><small>1</small></li>
  
    <li><a href="/tags/immediately-invoked-function-expression/">immediately-invoked-function-expression</a><small>2</small></li>
  
    <li><a href="/tags/index/">index</a><small>1</small></li>
  
    <li><a href="/tags/inheritance/">inheritance</a><small>1</small></li>
  
    <li><a href="/tags/install/">install</a><small>14</small></li>
  
    <li><a href="/tags/instance/">instance</a><small>1</small></li>
  
    <li><a href="/tags/interactive/">interactive</a><small>2</small></li>
  
    <li><a href="/tags/internet-speed/">internet-speed</a><small>1</small></li>
  
    <li><a href="/tags/interpreter/">interpreter</a><small>1</small></li>
  
    <li><a href="/tags/iojs/">iojs</a><small>3</small></li>
  
    <li><a href="/tags/ip-address/">ip-address</a><small>3</small></li>
  
    <li><a href="/tags/january/">january</a><small>1</small></li>
  
    <li><a href="/tags/jasmine/">jasmine</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>13</small></li>
  
    <li><a href="/tags/jelly-bean/">jelly-bean</a><small>1</small></li>
  
    <li><a href="/tags/join/">join</a><small>1</small></li>
  
    <li><a href="/tags/jq/">jq</a><small>5</small></li>
  
    <li><a href="/tags/jq-1-5/">jq-1.5</a><small>1</small></li>
  
    <li><a href="/tags/js-yaml/">js-yaml</a><small>1</small></li>
  
    <li><a href="/tags/jshint/">jshint</a><small>1</small></li>
  
    <li><a href="/tags/json/">json</a><small>5</small></li>
  
    <li><a href="/tags/kiss/">kiss</a><small>1</small></li>
  
    <li><a href="/tags/koa/">koa</a><small>7</small></li>
  
    <li><a href="/tags/koa-compose/">koa-compose</a><small>1</small></li>
  
    <li><a href="/tags/koa-router/">koa-router</a><small>2</small></li>
  
    <li><a href="/tags/lean/">lean</a><small>1</small></li>
  
    <li><a href="/tags/lean-coffee/">lean-coffee</a><small>1</small></li>
  
    <li><a href="/tags/lean-startup/">lean-startup</a><small>1</small></li>
  
    <li><a href="/tags/left-to-right-mark/">left-to-right-mark</a><small>1</small></li>
  
    <li><a href="/tags/lets-encrypt/">lets-encrypt</a><small>4</small></li>
  
    <li><a href="/tags/lf/">lf</a><small>1</small></li>
  
    <li><a href="/tags/libssl/">libssl</a><small>1</small></li>
  
    <li><a href="/tags/license/">license</a><small>1</small></li>
  
    <li><a href="/tags/like-button/">like-button</a><small>1</small></li>
  
    <li><a href="/tags/line-divider/">line-divider</a><small>1</small></li>
  
    <li><a href="/tags/line-ending/">line-ending</a><small>1</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>3</small></li>
  
    <li><a href="/tags/listobjects/">listobjects</a><small>1</small></li>
  
    <li><a href="/tags/livereload/">livereload</a><small>2</small></li>
  
    <li><a href="/tags/load/">load</a><small>1</small></li>
  
    <li><a href="/tags/lock/">lock</a><small>1</small></li>
  
    <li><a href="/tags/lodash/">lodash</a><small>1</small></li>
  
    <li><a href="/tags/log/">log</a><small>1</small></li>
  
    <li><a href="/tags/lorem-ipsum/">lorem-ipsum</a><small>1</small></li>
  
    <li><a href="/tags/los-angeles/">los-angeles</a><small>1</small></li>
  
    <li><a href="/tags/m101/">m101</a><small>1</small></li>
  
    <li><a href="/tags/managed-vms/">managed-vms</a><small>2</small></li>
  
    <li><a href="/tags/markdown/">markdown</a><small>2</small></li>
  
    <li><a href="/tags/md5/">md5</a><small>1</small></li>
  
    <li><a href="/tags/meeting/">meeting</a><small>1</small></li>
  
    <li><a href="/tags/messaging/">messaging</a><small>1</small></li>
  
    <li><a href="/tags/metric/">metric</a><small>4</small></li>
  
    <li><a href="/tags/mi3/">mi3</a><small>1</small></li>
  
    <li><a href="/tags/middleware/">middleware</a><small>2</small></li>
  
    <li><a href="/tags/minimatch/">minimatch</a><small>1</small></li>
  
    <li><a href="/tags/mocha/">mocha</a><small>3</small></li>
  
    <li><a href="/tags/module/">module</a><small>2</small></li>
  
    <li><a href="/tags/module-caching/">module-caching</a><small>1</small></li>
  
    <li><a href="/tags/mongodb/">mongodb</a><small>1</small></li>
  
    <li><a href="/tags/mongoexport/">mongoexport</a><small>1</small></li>
  
    <li><a href="/tags/msiexec/">msiexec</a><small>1</small></li>
  
    <li><a href="/tags/multi-parts/">multi-parts</a><small>1</small></li>
  
    <li><a href="/tags/multiple/">multiple</a><small>2</small></li>
  
    <li><a href="/tags/named-function/">named-function</a><small>1</small></li>
  
    <li><a href="/tags/natural-sort/">natural-sort</a><small>1</small></li>
  
    <li><a href="/tags/nb/">nb</a><small>1</small></li>
  
    <li><a href="/tags/network/">network</a><small>1</small></li>
  
    <li><a href="/tags/new-orleans/">new-orleans</a><small>2</small></li>
  
    <li><a href="/tags/new-york/">new-york</a><small>1</small></li>
  
    <li><a href="/tags/nginx/">nginx</a><small>3</small></li>
  
    <li><a href="/tags/node/">node</a><small>28</small></li>
  
    <li><a href="/tags/node-version-manager/">node-version-manager</a><small>1</small></li>
  
    <li><a href="/tags/nodemon/">nodemon</a><small>1</small></li>
  
    <li><a href="/tags/nodesource/">nodesource</a><small>1</small></li>
  
    <li><a href="/tags/normalization/">normalization</a><small>1</small></li>
  
    <li><a href="/tags/nota-bene/">nota-bene</a><small>1</small></li>
  
    <li><a href="/tags/note-well/">note-well</a><small>1</small></li>
  
    <li><a href="/tags/november/">november</a><small>1</small></li>
  
    <li><a href="/tags/npm/">npm</a><small>4</small></li>
  
    <li><a href="/tags/npm-module/">npm-module</a><small>1</small></li>
  
    <li><a href="/tags/ntp/">ntp</a><small>1</small></li>
  
    <li><a href="/tags/ntpdate/">ntpdate</a><small>1</small></li>
  
    <li><a href="/tags/null/">null</a><small>1</small></li>
  
    <li><a href="/tags/nvm/">nvm</a><small>1</small></li>
  
    <li><a href="/tags/object/">object</a><small>3</small></li>
  
    <li><a href="/tags/object-attributes/">object-attributes</a><small>1</small></li>
  
    <li><a href="/tags/one-liner/">one-liner</a><small>2</small></li>
  
    <li><a href="/tags/openssl/">openssl</a><small>3</small></li>
  
    <li><a href="/tags/order/">order</a><small>1</small></li>
  
    <li><a href="/tags/outdated/">outdated</a><small>1</small></li>
  
    <li><a href="/tags/package/">package</a><small>1</small></li>
  
    <li><a href="/tags/package-json/">package.json</a><small>2</small></li>
  
    <li><a href="/tags/pageview/">pageview</a><small>4</small></li>
  
    <li><a href="/tags/parseint/">parseint</a><small>1</small></li>
  
    <li><a href="/tags/part/">part</a><small>1</small></li>
  
    <li><a href="/tags/password/">password</a><small>1</small></li>
  
    <li><a href="/tags/patch/">patch</a><small>1</small></li>
  
    <li><a href="/tags/path/">path</a><small>4</small></li>
  
    <li><a href="/tags/pattern-matching/">pattern-matching</a><small>1</small></li>
  
    <li><a href="/tags/pinboard/">pinboard</a><small>1</small></li>
  
    <li><a href="/tags/ping/">ping</a><small>1</small></li>
  
    <li><a href="/tags/pipe/">pipe</a><small>1</small></li>
  
    <li><a href="/tags/pm2/">pm2</a><small>1</small></li>
  
    <li><a href="/tags/port/">port</a><small>3</small></li>
  
    <li><a href="/tags/port-forwarding/">port-forwarding</a><small>1</small></li>
  
    <li><a href="/tags/post/">post</a><small>1</small></li>
  
    <li><a href="/tags/prefix/">prefix</a><small>1</small></li>
  
    <li><a href="/tags/preinstall/">preinstall</a><small>1</small></li>
  
    <li><a href="/tags/principle/">principle</a><small>1</small></li>
  
    <li><a href="/tags/process/">process</a><small>1</small></li>
  
    <li><a href="/tags/profile/">profile</a><small>1</small></li>
  
    <li><a href="/tags/programming-style/">programming-style</a><small>0</small></li>
  
    <li><a href="/tags/protocol/">protocol</a><small>1</small></li>
  
    <li><a href="/tags/provision/">provision</a><small>1</small></li>
  
    <li><a href="/tags/proxy/">proxy</a><small>1</small></li>
  
    <li><a href="/tags/put/">put</a><small>1</small></li>
  
    <li><a href="/tags/python/">python</a><small>1</small></li>
  
    <li><a href="/tags/query-parameter/">query-parameter</a><small>1</small></li>
  
    <li><a href="/tags/queue/">queue</a><small>1</small></li>
  
    <li><a href="/tags/random/">random</a><small>3</small></li>
  
    <li><a href="/tags/range/">range</a><small>1</small></li>
  
    <li><a href="/tags/rawgit/">rawgit</a><small>1</small></li>
  
    <li><a href="/tags/read/">read</a><small>1</small></li>
  
    <li><a href="/tags/reboot/">reboot</a><small>2</small></li>
  
    <li><a href="/tags/record-set/">record-set</a><small>1</small></li>
  
    <li><a href="/tags/redis/">redis</a><small>1</small></li>
  
    <li><a href="/tags/relative-path/">relative-path</a><small>1</small></li>
  
    <li><a href="/tags/release/">release</a><small>1</small></li>
  
    <li><a href="/tags/remote-working/">remote-working</a><small>1</small></li>
  
    <li><a href="/tags/renew/">renew</a><small>1</small></li>
  
    <li><a href="/tags/repl/">repl</a><small>1</small></li>
  
    <li><a href="/tags/require/">require</a><small>2</small></li>
  
    <li><a href="/tags/resource/">resource</a><small>1</small></li>
  
    <li><a href="/tags/responsibility/">responsibility</a><small>1</small></li>
  
    <li><a href="/tags/restart/">restart</a><small>2</small></li>
  
    <li><a href="/tags/rlwrap/">rlwrap</a><small>1</small></li>
  
    <li><a href="/tags/route-53/">route-53</a><small>2</small></li>
  
    <li><a href="/tags/routing/">routing</a><small>2</small></li>
  
    <li><a href="/tags/ruby/">ruby</a><small>1</small></li>
  
    <li><a href="/tags/rule-of-diversity/">rule-of-diversity</a><small>1</small></li>
  
    <li><a href="/tags/san-francisco/">san-francisco</a><small>1</small></li>
  
    <li><a href="/tags/save/">save</a><small>1</small></li>
  
    <li><a href="/tags/scaffolding/">scaffolding</a><small>1</small></li>
  
    <li><a href="/tags/script/">script</a><small>1</small></li>
  
    <li><a href="/tags/search/">search</a><small>1</small></li>
  
    <li><a href="/tags/search-term/">search-term</a><small>1</small></li>
  
    <li><a href="/tags/section/">section</a><small>1</small></li>
  
    <li><a href="/tags/security/">security</a><small>1</small></li>
  
    <li><a href="/tags/security-group/">security-group</a><small>2</small></li>
  
    <li><a href="/tags/sed/">sed</a><small>1</small></li>
  
    <li><a href="/tags/semantics/">semantics</a><small>1</small></li>
  
    <li><a href="/tags/semver/">semver</a><small>2</small></li>
  
    <li><a href="/tags/seq/">seq</a><small>1</small></li>
  
    <li><a href="/tags/serialization/">serialization</a><small>1</small></li>
  
    <li><a href="/tags/server/">server</a><small>3</small></li>
  
    <li><a href="/tags/setter/">setter</a><small>2</small></li>
  
    <li><a href="/tags/settings/">settings</a><small>1</small></li>
  
    <li><a href="/tags/setup/">setup</a><small>2</small></li>
  
    <li><a href="/tags/sha256/">sha256</a><small>1</small></li>
  
    <li><a href="/tags/shabang/">shabang</a><small>1</small></li>
  
    <li><a href="/tags/sharing/">sharing</a><small>1</small></li>
  
    <li><a href="/tags/shebang/">shebang</a><small>1</small></li>
  
    <li><a href="/tags/shell/">shell</a><small>3</small></li>
  
    <li><a href="/tags/shell-expansion/">shell-expansion</a><small>1</small></li>
  
    <li><a href="/tags/shell-script/">shell-script</a><small>1</small></li>
  
    <li><a href="/tags/shellshock/">shellshock</a><small>1</small></li>
  
    <li><a href="/tags/shopt/">shopt</a><small>1</small></li>
  
    <li><a href="/tags/simple/">simple</a><small>1</small></li>
  
    <li><a href="/tags/small/">small</a><small>1</small></li>
  
    <li><a href="/tags/socket-io/">socket-io</a><small>1</small></li>
  
    <li><a href="/tags/sort/">sort</a><small>2</small></li>
  
    <li><a href="/tags/source-maps/">source-maps</a><small>1</small></li>
  
    <li><a href="/tags/speed-test/">speed-test</a><small>1</small></li>
  
    <li><a href="/tags/split/">split</a><small>2</small></li>
  
    <li><a href="/tags/ssh/">ssh</a><small>4</small></li>
  
    <li><a href="/tags/ssh-copy-id/">ssh-copy-id</a><small>1</small></li>
  
    <li><a href="/tags/sshuttle/">sshuttle</a><small>1</small></li>
  
    <li><a href="/tags/ssl/">ssl</a><small>4</small></li>
  
    <li><a href="/tags/starter/">starter</a><small>6</small></li>
  
    <li><a href="/tags/startup/">startup</a><small>2</small></li>
  
    <li><a href="/tags/state/">state</a><small>1</small></li>
  
    <li><a href="/tags/stats/">stats</a><small>5</small></li>
  
    <li><a href="/tags/stdin/">stdin</a><small>1</small></li>
  
    <li><a href="/tags/stream/">stream</a><small>2</small></li>
  
    <li><a href="/tags/streaming/">streaming</a><small>1</small></li>
  
    <li><a href="/tags/string/">string</a><small>1</small></li>
  
    <li><a href="/tags/stringify/">stringify</a><small>1</small></li>
  
    <li><a href="/tags/structure/">structure</a><small>1</small></li>
  
    <li><a href="/tags/subscription/">subscription</a><small>1</small></li>
  
    <li><a href="/tags/success/">success</a><small>1</small></li>
  
    <li><a href="/tags/sudo/">sudo</a><small>1</small></li>
  
    <li><a href="/tags/sunset-limited/">sunset-limited</a><small>1</small></li>
  
    <li><a href="/tags/supertest/">supertest</a><small>1</small></li>
  
    <li><a href="/tags/symbolic-link/">symbolic-link</a><small>1</small></li>
  
    <li><a href="/tags/symlink/">symlink</a><small>1</small></li>
  
    <li><a href="/tags/sync/">sync</a><small>1</small></li>
  
    <li><a href="/tags/synchronous/">synchronous</a><small>2</small></li>
  
    <li><a href="/tags/systemd/">systemd</a><small>1</small></li>
  
    <li><a href="/tags/taipei/">taipei</a><small>1</small></li>
  
    <li><a href="/tags/taiwan/">taiwan</a><small>1</small></li>
  
    <li><a href="/tags/task/">task</a><small>1</small></li>
  
    <li><a href="/tags/tcdisrupt/">tcdisrupt</a><small>1</small></li>
  
    <li><a href="/tags/teardown/">teardown</a><small>1</small></li>
  
    <li><a href="/tags/techcrunch/">techcrunch</a><small>1</small></li>
  
    <li><a href="/tags/template/">template</a><small>2</small></li>
  
    <li><a href="/tags/terminal/">terminal</a><small>1</small></li>
  
    <li><a href="/tags/test/">test</a><small>1</small></li>
  
    <li><a href="/tags/testing/">testing</a><small>1</small></li>
  
    <li><a href="/tags/texting/">texting</a><small>1</small></li>
  
    <li><a href="/tags/this/">this</a><small>1</small></li>
  
    <li><a href="/tags/time-zone/">time-zone</a><small>1</small></li>
  
    <li><a href="/tags/tmux/">tmux</a><small>1</small></li>
  
    <li><a href="/tags/todo/">todo</a><small>1</small></li>
  
    <li><a href="/tags/topic/">topic</a><small>2</small></li>
  
    <li><a href="/tags/train/">train</a><small>2</small></li>
  
    <li><a href="/tags/transfer-encoding/">transfer-encoding</a><small>1</small></li>
  
    <li><a href="/tags/travel/">travel</a><small>0</small></li>
  
    <li><a href="/tags/trello/">trello</a><small>1</small></li>
  
    <li><a href="/tags/trigger/">trigger</a><small>1</small></li>
  
    <li><a href="/tags/trusty/">trusty</a><small>1</small></li>
  
    <li><a href="/tags/tumblr/">tumblr</a><small>1</small></li>
  
    <li><a href="/tags/twitter/">twitter</a><small>1</small></li>
  
    <li><a href="/tags/ubuntu/">ubuntu</a><small>5</small></li>
  
    <li><a href="/tags/uglifyjs/">uglifyjs</a><small>1</small></li>
  
    <li><a href="/tags/ulimit/">ulimit</a><small>1</small></li>
  
    <li><a href="/tags/underscore/">underscore</a><small>1</small></li>
  
    <li><a href="/tags/unicode/">unicode</a><small>1</small></li>
  
    <li><a href="/tags/unique-visitor/">unique-visitor</a><small>4</small></li>
  
    <li><a href="/tags/united-states/">united-states</a><small>1</small></li>
  
    <li><a href="/tags/unix/">unix</a><small>1</small></li>
  
    <li><a href="/tags/unix-philosophy/">unix-philosophy</a><small>1</small></li>
  
    <li><a href="/tags/update/">update</a><small>2</small></li>
  
    <li><a href="/tags/upgrade/">upgrade</a><small>2</small></li>
  
    <li><a href="/tags/upload/">upload</a><small>1</small></li>
  
    <li><a href="/tags/upstart/">upstart</a><small>1</small></li>
  
    <li><a href="/tags/upwork/">upwork</a><small>1</small></li>
  
    <li><a href="/tags/url/">url</a><small>1</small></li>
  
    <li><a href="/tags/username/">username</a><small>1</small></li>
  
    <li><a href="/tags/vagrant/">vagrant</a><small>8</small></li>
  
    <li><a href="/tags/vagrant-box/">vagrant-box</a><small>1</small></li>
  
    <li><a href="/tags/vagrant-google/">vagrant-google</a><small>1</small></li>
  
    <li><a href="/tags/vagrant-plugin/">vagrant-plugin</a><small>1</small></li>
  
    <li><a href="/tags/validation/">validation</a><small>1</small></li>
  
    <li><a href="/tags/version/">version</a><small>6</small></li>
  
    <li><a href="/tags/version-sort/">version-sort</a><small>1</small></li>
  
    <li><a href="/tags/video/">video</a><small>1</small></li>
  
    <li><a href="/tags/vim/">vim</a><small>3</small></li>
  
    <li><a href="/tags/vimdiff/">vimdiff</a><small>1</small></li>
  
    <li><a href="/tags/vimeo/">vimeo</a><small>1</small></li>
  
    <li><a href="/tags/virtualbox/">virtualbox</a><small>1</small></li>
  
    <li><a href="/tags/visit/">visit</a><small>4</small></li>
  
    <li><a href="/tags/vivid/">vivid</a><small>1</small></li>
  
    <li><a href="/tags/vpn/">vpn</a><small>1</small></li>
  
    <li><a href="/tags/vulnerability/">vulnerability</a><small>1</small></li>
  
    <li><a href="/tags/web-framework/">web-framework</a><small>1</small></li>
  
    <li><a href="/tags/web-server/">web-server</a><small>2</small></li>
  
    <li><a href="/tags/webhook/">webhook</a><small>1</small></li>
  
    <li><a href="/tags/windows/">windows</a><small>2</small></li>
  
    <li><a href="/tags/workflow/">workflow</a><small>1</small></li>
  
    <li><a href="/tags/x-content-type-options/">x-content-type-options</a><small>1</small></li>
  
    <li><a href="/tags/xargs/">xargs</a><small>1</small></li>
  
    <li><a href="/tags/xiaomi/">xiaomi</a><small>1</small></li>
  
    <li><a href="/tags/yaml/">yaml</a><small>1</small></li>
  
    <li><a href="/tags/yeoman/">yeoman</a><small>1</small></li>
  
    <li><a href="/tags/yield/">yield</a><small>1</small></li>
  
    <li><a href="/tags/zone-apex/">zone-apex</a><small>1</small></li>
  
    <li><a href="/tags/中華電信/">中華電信</a><small>1</small></li>
  
    <li><a href="/tags/小米/">小米</a><small>1</small></li>
  
    <li><a href="/tags/小米手机/">小米手机</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Chao Huang
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'realguess';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>